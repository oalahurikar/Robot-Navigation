# ü§ñ ROBOT NAVIGATION NEURAL NETWORK CONFIGURATION
# ================================================
# 
# This configuration file defines all hyperparameters and settings
# for the neural network used in robot navigation.

# =============================================================================
# NEURAL NETWORK ARCHITECTURE
# =============================================================================

# Model Architecture
model:
  # Dynamic input size based on perception mode
  # 3√ó3 mode: 9 perception + 12 history = 21 features
  # 5√ó5 mode: 25 perception + 12 history = 37 features
  input_size: 21             # Will be auto-calculated based on perception_size + history_size
  perception_size: 9         # 3√ó3 perception (9) or 5√ó5 perception (25)
  history_size: 12           # 3 actions √ó 4 one-hot encoding = 12 features
  hidden1_size: 64           # First hidden layer neurons
  hidden2_size: 32           # Second hidden layer neurons  
  output_size: 4             # 4 navigation actions (UP, DOWN, LEFT, RIGHT)
  
  # Activation functions
  hidden_activation: "relu"  # ReLU for hidden layers
  output_activation: "softmax"  # Softmax for output layer
  
  # Regularization
  dropout_rate: 0.2          # Dropout rate for regularization
  weight_decay: 0.001         # L2 regularization (not used in this implementation)

# =============================================================================
# TRAINING HYPERPARAMETERS
# =============================================================================

training:
  # Optimization
  learning_rate: 0.0005       # Initial learning rate
  batch_size: 64             # Mini-batch size
  epochs: 200                # Maximum number of epochs
  
  # Early stopping
  early_stopping:
    enabled: true
    patience: 55             # Epochs to wait before stopping
    monitor: "val_loss"      # Metric to monitor
    min_delta: 0.0001         # Minimum change to qualify as improvement
  
  # Learning rate scheduling (future enhancement)
  lr_scheduler:
    enabled: true
    type: "cosine"             # "step", "exponential", "cosine"
    step_size: 15
    gamma: 0.5

# =============================================================================
# DATA SPLITTING
# =============================================================================

data:
  # Split ratios
  train_ratio: 0.8           # 80% for training
  val_ratio: 0.1             # 10% for validation
  test_ratio: 0.1            # 10% for testing
  
  # Data preprocessing
  normalize: false           # No normalization needed (binary 0/1 values)
  shuffle: true              # Shuffle data before splitting
  random_seed: 42            # For reproducible splits

# =============================================================================
# MODEL PERSISTENCE
# =============================================================================

model_save:
  # File paths
  model_dir: "data/models/final_models"
  model_filename: "robot_navigation_nn.pkl"
  history_filename: "training_history.png"
  
  # Save options
  save_best_only: true       # Save only the best model (based on validation loss)
  save_weights_only: false   # Save full model (weights + architecture)
  save_history: true         # Save training history plots

# =============================================================================
# EVALUATION METRICS
# =============================================================================

evaluation:
  # Metrics to compute
  metrics:
    - "accuracy"             # Classification accuracy
    - "loss"                 # Cross-entropy loss
    - "confusion_matrix"     # Confusion matrix
    - "classification_report"  # Detailed classification report
  
  # Action mapping
  action_names:
    - "UP"                   # Action 0
    - "DOWN"                 # Action 1  
    - "LEFT"                 # Action 2
    - "RIGHT"                # Action 3

# =============================================================================
# VISUALIZATION SETTINGS
# =============================================================================

visualization:
  # Training plots
  plot_training_history: true
  plot_confusion_matrix: true
  plot_architecture: true
  
  # Plot settings
  figure_size: [12, 5]       # Width, height in inches
  dpi: 300                   # Resolution for saved plots
  style: "seaborn-v0_8"      # Matplotlib style
  
  # Colors
  colors:
    train: "blue"
    validation: "red"
    test: "green"

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================

logging:
  # Logging level
  level: "INFO"              # DEBUG, INFO, WARNING, ERROR
  
  # Log files
  log_dir: "data/results/logs"
  log_filename: "training.log"
  
  # Console output
  print_every_n_epochs: 10   # Print progress every N epochs
  verbose: true              # Detailed output during training

# =============================================================================
# EXPERIMENTAL SETTINGS
# =============================================================================

experiments:
  # Hyperparameter tuning
  hyperparameter_tuning:
    enabled: false           # Set to true to run hyperparameter tuning
    param_grid:
      learning_rate: [0.001, 0.01, 0.1]
      dropout_rate: [0.1, 0.2, 0.3]
      hidden1_size: [32, 64, 128]
      hidden2_size: [16, 32, 64]
  
  # Architecture comparison
  architecture_comparison:
    enabled: false           # Set to true to compare architectures
    architectures:
      - name: "Small"
        hidden1_size: 32
        hidden2_size: 16
      - name: "Medium" 
        hidden1_size: 64
        hidden2_size: 32
      - name: "Large"
        hidden1_size: 128
        hidden2_size: 64

# =============================================================================
# BIOLOGICAL INSPIRATION NOTES
# =============================================================================

biological_notes: |
  üß† BIOLOGICAL CONNECTIONS:
  
  - Local Perception: 3√ó3 grid mimics animal peripheral vision
  - ReLU Activation: Mimics spiking neurons (active/silent states)
  - Dropout: Simulates neural noise and robustness
  - Softmax: Mimics neural competition for activation
  - Pattern Learning: Robot learns obstacle-action relationships
  
  üß¨ NEUROSCIENCE PRINCIPLES:
  
  - Sparse Activation: ReLU creates sparse representations
  - Gradient Flow: ReLU prevents vanishing gradients
  - Regularization: Dropout prevents overfitting
  - Competition: Softmax ensures only one action is selected
  - Learning: Backpropagation mimics synaptic plasticity

# =============================================================================
# MATHEMATICAL FOUNDATION
# =============================================================================

mathematical_notes: |
  üìê KEY EQUATIONS:
  
  - ReLU: f(x) = max(0, x)
  - Softmax: p_i = exp(z_i) / Œ£ exp(z_j)
  - Cross-entropy: L = -Œ£ y_i log(p_i)
  - Dropout: x' = x * mask / (1-p)
  - Xavier Init: std = sqrt(2 / (fan_in + fan_out))
  
  üéØ OPTIMIZATION:
  
  - Gradient Descent: Œ∏ = Œ∏ - Œ±‚àáL
  - Mini-batch: Process data in small batches
  - Early Stopping: Prevent overfitting
  - Regularization: Dropout for generalization

# =============================================================================
# PERCEPTION MODE CONFIGURATIONS
# =============================================================================

perception_modes:
  # 3√ó3 Enhanced Mode (Default)
  "3x3":
    perception_size: 9
    input_size: 21          # 9 perception + 12 history
    description: "3√ó3 perception with action history"
    expected_accuracy: "76-78%"
    
  # 5√ó5 Enhanced Mode  
  "5x5":
    perception_size: 25
    input_size: 37          # 25 perception + 12 history
    description: "5√ó5 perception with action history"
    expected_accuracy: "79-82%"

# =============================================================================
# USAGE INSTRUCTIONS
# =============================================================================

usage_notes: |
  üöÄ HOW TO USE DIFFERENT PERCEPTION MODES:
  
  1. For 3√ó3 Enhanced Mode (Default):
     - Use as-is: perception_size: 9, input_size: 21
     - Generate data: python scripts/generate_data.py large
     - Train: python scripts/train_nn.py --perception 3x3
     
  2. For 5√ó5 Enhanced Mode:
     - Update: perception_size: 25, input_size: 37
     - Generate data: python scripts/generate_data.py large --perception 5x5
     - Train: python scripts/train_nn.py --perception 5x5
     
  3. Auto-configuration:
     - The training script will automatically update input_size based on perception_size
     - No need to manually edit input_size when switching modes
     
  üìä PERFORMANCE COMPARISON:
  
  | Mode | Features | Accuracy | Use Case |
  |------|----------|----------|----------|
  | 3√ó3 Enhanced | 21 | 76.7% | Standard navigation |
  | 5√ó5 Enhanced | 37 | 79.1% | Advanced navigation |
  
  üéØ RECOMMENDATIONS:
  
  - Start with 3√ó3 Enhanced for baseline performance
  - Use 5√ó5 Enhanced for improved spatial awareness
  - Both modes include action history for temporal context
